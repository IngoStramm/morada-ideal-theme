let autocomplete,map,lat=ajax_object.lat,lng=ajax_object.lng,itemsLista=Object.values(ajax_object.imoveis),todosImoveis=itemsLista,allInfoWindows=[],markers={};function initMap(){var e,t=document.getElementById("map");t&&(lat,lat)&&(lng,lng)&&(lat=Number(lat),lng=Number(lng),e={lat:lat,lng:lng},map=new google.maps.Map(t,{zoom:15,center:e,mapTypeControl:!1}),todosImoveis.forEach((e,t)=>{var a={lat:parseFloat(e.lat),lng:parseFloat(e.lng)};let l=`<div class="map-listing-item">
                <div class="inner-box">
                    <h5><a href="${e.post_url}">${e.title}</a></h5>
                    <address>
                    Endereço: ${e.rua}, ${e.numero} - ${e.cidade} / ${e.estado}, ${e.codigo_postal}
                    </address>
                </div>
            </div>`,r=new google.maps.InfoWindow({content:l,ariaLabel:e.title});allInfoWindows.push(r);var o,a=new google.maps.Marker({position:a,map:map,title:e.title});google.maps.event.addListener(a,"click",(o=a,function(){closeAllInfoWindows(),r.setContent(l),r.open(map,o),map.setZoom(16),map.setCenter(o.getPosition())})),markers[e.post_id]=a}))}function closeAllInfoWindows(){for(var e of allInfoWindows)e.close()}function miInitAutocomplete(){document.querySelectorAll(".autocomplete-wrapper").forEach(t=>{var a=t.querySelector(".autocomplete");if(a){autocomplete=new google.maps.places.Autocomplete(a,{componentRestrictions:{country:["PT"]},fields:["place_id","geometry","name","address_components"]});let e=t.querySelector(".autocomplete-message");a.addEventListener("change",e=>{}),autocomplete.addListener("place_changed",()=>miOnPlaceChanged(e))}})}function miSetInputsNewValue(e,t){e.forEach(e=>{e.value=t})}function miOnPlaceChanged(t){var a=autocomplete.getPlace(),l=t.closest("form"),r="true"===l.querySelector("input.autocomplete").getAttribute("data-validate");if(l){var o=l.querySelectorAll('input[name="lat"]'),n=l.querySelectorAll('input[name="lng"]'),i=l.querySelectorAll('input[name="imovel_estado"]'),s=l.querySelectorAll('input[name="imovel_cidade"]'),c=l.querySelectorAll('input[name="imovel_codigo_postal"]'),l=l.querySelectorAll('input[name="imovel_rua"]'),d=document.getElementById("new-imovel-form-btn");let e="";if(d&&d.setAttribute("disabled",""),t&&(t.style.display="block"),o)if(n)if(a.geometry){console.log(a.address_components),t.style.display="none",lat=a.geometry.location.lat(),lng=a.geometry.location.lng();var u=a.address_components.filter(e=>e.types.includes("administrative_area_level_1")),m=a.address_components.filter(e=>e.types.includes("administrative_area_level_2")),p=a.address_components.filter(e=>e.types.includes("postal_code")),v=a.address_components.filter(e=>e.types.includes("route")),a=(a.address_components.filter(e=>e.types.includes("street_number")),document.getElementById("autocomplete").innerHTML=a.name,miSetInputsNewValue(o,lat),miSetInputsNewValue(n,lng),u[0]?.short_name?miSetInputsNewValue(i,u[0]?.short_name||""):r&&(t.style.display="block",miSetInputsNewValue(i,"")),m[0]?.short_name?miSetInputsNewValue(s,m[0]?.short_name||""):r&&(t.style.display="block",miSetInputsNewValue(s,"")),p[0]?.short_name?miSetInputsNewValue(c,p[0]?.short_name||""):r&&(t.style.display="block",miSetInputsNewValue(c,"")),v[0]?.long_name?miSetInputsNewValue(l,v[0]?.long_name||""):r&&(t.style.display="block",miSetInputsNewValue(l,"")),document.getElementById("table-regiao-imoveis"));if(a){m=a.querySelector('[type="search"');if(m){m.value=u[0]?.short_name,m.dispatchEvent(new Event("keyup"));let a=miNormalizeText(u[0]?.short_name);(e=document.querySelectorAll('[name="regiao-terms[]"]')).forEach(e=>{var t=miNormalizeText(e.getAttribute("data-name"));a===t&&(e.checked=!0,e.dispatchEvent(new Event("change")))})}}d&&d.removeAttribute("disabled")}else{document.getElementById("autocomplete").placeholder="Digite um endereço",miSetInputsNewValue(o,""),miSetInputsNewValue(n,""),miSetInputsNewValue(i,""),miSetInputsNewValue(s,""),miSetInputsNewValue(c,""),miSetInputsNewValue(l,""),t.style.display="block",d&&d.setAttribute("disabled","");p=document.getElementById("table-regiao-imoveis");p&&(v=p.querySelector('[type="search"'))&&((e=document.querySelectorAll('[name="regiao-terms[]"]')).forEach(e=>{e.checked=!1,e.dispatchEvent(new Event("change"))}),v.value="",v.dispatchEvent(new Event("keyup")))}else console.error("Não foi possível encontrar o input de longitude");else console.error("Não foi possível encontrar o input de latitude")}else console.error("Não foi possível encontrar o formulário do autocomplete")}function initGoogleApi(){window.addEventListener("load",function(){miInitAutocomplete()})}(()=>{function d(e,t,a){var l=document.createElement("div");l.classList.add("mt-3"),l.innerHTML=[`<div id="contact-form-alert" class="alert alert-${a} alert-dismissible" role="alert">`,`   <div>${t}</div>`,'   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',"</div>"].join(""),e.append(l)}function a(){var e=document.getElementById("operacao-filter");if(e){let o=document.getElementById("operacao-term");if(o,o){let r=e.querySelectorAll(".nav-link-item");r.forEach(l=>{l.addEventListener("click",e=>{e.preventDefault(),console.log("nav-link-item");var t,a,e=l.getAttribute("data-term-id");t=r,a="active",t.forEach(e=>{e.classList.remove(a)}),l.classList.add("active"),o.value=e})})}}}function l(){let o=document.getElementById("user_pass");if(o,o){let r=document.querySelectorAll(".meter-section");r.length<=0||o.addEventListener("keyup",()=>{{var a=o,l=r;let e=a.value,t=(e=>{let t=0;return t+=.2*e.length,/[A-Z]/.test(e)&&(t+=.5),/[a-z]/.test(e)&&(t+=.5),/\d/.test(e)&&(t+=.7),/[^A-Za-z0-9]/.test(e)&&(t+=1),t})(e);l.forEach(e=>{e.classList.remove("weak","medium","strong","very-strong")}),1<=t&&l[0].classList.add("weak"),2<=t&&l[1].classList.add("medium"),3<=t&&l[2].classList.add("strong"),4<=t&&l[3].classList.add("very-strong"),console.log("strength",t)}})}}function r(){document.querySelectorAll(".galeria-preview").forEach(e=>{let o=e.querySelector('input[type="file"]'),n=o.getAttribute("data-img-qty"),i=o.getAttribute("data-max-img-qty"),s=e.querySelector(".box-img-upload"),c=e.querySelector(".file-name"),d=c.innerText;c.setAttribute("data-original-text",d);e=e.querySelector(".btn-clear-file-upload");o.addEventListener("change",t=>{for(var t=t.target.files,e=t.length,a=(console.log("selectedFilesQty",e),console.log("imgQty",n),console.log("maxImgQty",i),console.log("fileInput",o.value),s);a.firstChild;)a.removeChild(a.lastChild);if(e+parseInt(n)>parseInt(i))console.log("Quantidade máxima de imagens atingida."),c.innerText="Quantidade máxima de imagens atingida.",o.value="";else{d=c.getAttribute("data-original-text")?c.getAttribute("data-original-text"):d,c.innerText=0<t.length?"":d;let e=0;for(var l of t){var r=document.createElement("img"),l=(r.classList.add("image-preview"),r.src=URL.createObjectURL(l),document.createElement("div"));l.classList.add("item-upload"),l.append(r),l.append(r),s.append(l),e++}c.innerText=e+" arquivos adicionados."}}),e.addEventListener("click",e=>{e.preventDefault(),o.value="",o.dispatchEvent(new Event("change"))})})}function o(){let t=document.getElementById("uploadfile");if(t,t){let a=t.querySelector('input[type="file"]');function l(e){e.preventDefault(),e.stopPropagation()}function r(e){t.classList.add("highlight")}function o(e){t.classList.remove("highlight")}a,a&&(["dragenter","dragover","dragleave","drop"].forEach(e=>{t.addEventListener(e,l,!1)}),["dragenter","dragover"].forEach(e=>{t.addEventListener(e,r,!1)}),["dragleave","drop"].forEach(e=>{t.addEventListener(e,o,!1)}),t.addEventListener("drop",function(e){e=e.dataTransfer,e=e.files;(e=>{let t=new DataTransfer;[...a.files].forEach(e=>{t.items.add(e)}),[...e].forEach(e=>{console.log(e),t.items.add(e)}),a.files=t.files,a.dispatchEvent(new Event("change"))})(e)},!1))}}function i(t,a,l,r){t.querySelector(a).addEventListener("click",e=>{e.preventDefault(),t.remove();e=l.querySelectorAll(r);0===e.length&&n(l,r,a),console.log("selectorItem",e.length),s(l,r)})}function n(e,t,a){var l,r,o=e.querySelectorAll(t),n=(o=o.length+1,(l=document.createElement("span")).classList.add("caracteristica-number"),l.innerText=o,(n=document.createElement("label")).setAttribute("for","característica-"+o),n.append(l),(l=document.createElement("input")).id="característica-"+o,l.type="text",l.name="caracteristicas-especificas[]",l.classList.add("form-control"),l.classList.add("style-1"),(o=document.createElement("a")).href="#",o.classList.add("delete-item"),o.classList.add("icon-link"),o.innerHTML='<span class="icon icon-trash"></span>',(r=document.createElement("div")).classList.add("input-icon-group"),r.append(l),r.append(o),(l=document.createElement("fieldset")).classList.add("box"),l.classList.add("box-fieldset"),l.append(n),l.append(r),(o=document.createElement("div")).classList.add("caracteristica-group"),o.classList.add("repeater-group-list"),o.append(l),o);e.append(n),i(n,a,e,t)}function s(e,t){e=e.querySelectorAll(t);e.forEach(e=>{e.removeAttribute("data-index")}),e.forEach((e,t)=>{t+=1,e.setAttribute("data-index",t),e=e.querySelector("label");e&&(e.innerText=t)})}function c(e,t,a){console.log(t);var l=document.createElement("div");l.innerHTML=[`<div id="contact-form-alert" class="alert alert-${a} alert-dismissible" role="alert">`,`   <div>${t}</div>`,'   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',"</div>"].join(""),e.append(l)}window.addEventListener("load",function(){e=document.querySelectorAll(".needs-validation"),Array.from(e).forEach(t=>{t.addEventListener("submit",e=>{"previous-step"===e.submitter.name||t.checkValidity()||(e.preventDefault(),e.stopPropagation()),"previous-step"!==e.submitter.name&&t.classList.add("was-validated")},!1)}),document.querySelectorAll(".mi-newsletter-form").forEach(n=>{n.addEventListener("submit",r=>{if(r.preventDefault(),document.getElementById("newsletter-form-alert"),document.getElementById("newsletter-form-alert")&&bootstrap.Alert.getOrCreateInstance("#newsletter-form-alert").close(),n.checkValidity()){n.classList.add("was-validated");let a=n.querySelector("#email"),l=n.querySelector("button");if(l,l&&!l.disabled){l.disabled=!0;let e=l.innerHTML;l.innerHTML="Enviando...";var r=ajax_object.ajax_url,o=new FormData(n);o.get("action");let t=document.getElementById("newsletter-form-alert-placeholder");fetch(r,{method:"POST",body:o}).then(e=>e.json()).then(e=>{d(t,e.data.msg,"success"),a.value=""}).catch(e=>{d(t,e,"danger")}).finally(()=>{l.disabled=!1,l.innerHTML=e,n.classList.remove("was-validated")})}}})}),document.querySelectorAll(".archive-layout").forEach(e=>{e.querySelectorAll(".nav-link-item").forEach(e=>{e.addEventListener("shown.bs.tab",e=>{let a=e.target.getAttribute("data-layout");e=new URL(window.location.href);"grid"===a?e.searchParams.delete("layout"):e.searchParams.set("layout",a),window.history.pushState({},"",e),document.querySelectorAll(".wd-navigation").forEach(e=>{e.querySelectorAll("a").forEach(e=>{var t=new URL(e.href);"grid"===a?t.searchParams.delete("layout"):t.searchParams.set("layout",a),e.href=t.toString()})})})})}),document.querySelectorAll(".archive-sort").forEach(e=>{e.querySelectorAll("ul").forEach(e=>{e.querySelectorAll("li").forEach(e=>{e.addEventListener("click",e=>{var e=e.target.getAttribute("data-value"),t=new URL(window.location.href);e?t.searchParams.set("orderby",e):t.searchParams.delete("orderby"),window.history.pushState({},"",t),window.location=t})})})}),document.querySelectorAll(".select-list").forEach(e=>{let a=e.querySelector("[data-select-list-value]");e.querySelectorAll("li").forEach(t=>{t.addEventListener("click",()=>{console.log("selectLists click");t.getAttribute("data-value");var e=t.getAttribute("data-term-id");a,a&&(a.value=e,console.log("click",e))})})}),a(),document.querySelectorAll(".toogle-preview").forEach(e=>{var t=e.querySelector(".imovel-content");console.log("imovelContent",t.offsetHeight);let r=e.querySelector(".toogle-preview-content"),o=e.querySelector(".toogle-preview-btn");80<=t.offsetHeight?o.addEventListener("click",e=>{e.preventDefault();var e=o.innerText,t=o.getAttribute("data-text"),a=o.getAttribute("data-anchor"),a=document.getElementById(a),l=o.querySelector(".text");r.classList.toggle("expanded"),l.innerText=t,o.setAttribute("data-text",e),!r.classList.contains("expanded")&&a&&a.scrollIntoView()}):(o.remove(),r.classList.toggle("expanded"))}),document.querySelectorAll(".mi-anunciante-contact-form").forEach(c=>{c.addEventListener("submit",i=>{if(i.preventDefault(),document.getElementById("anunciante-contact-form-alert"),document.getElementById("anunciante-contact-form-alert")&&bootstrap.Alert.getOrCreateInstance("#anunciante-contact-form-alert").close(),c.checkValidity()){c.classList.add("was-validated");let a=c.querySelector("#nome"),l=c.querySelector("#phone"),r=c.querySelector("#email"),o=c.querySelector("#mensagem"),n=c.querySelector("button");if(n,n&&!n.disabled){n.disabled=!0;let e=n.innerText;n.innerText="Enviando...";var i=ajax_object.ajax_url,s=new FormData(c);s.get("action");let t=document.getElementById("anunciante-contact-form-alert-placeholder");fetch(i,{method:"POST",body:s}).then(e=>e.json()).then(e=>{d(t,e.data.msg,"success"),a.value="",l.value="",r.value="",o.value=""}).catch(e=>{d(t,e,"danger")}).finally(()=>{n.disabled=!1,n.innerText=e,c.classList.remove("was-validated")})}}})}),e=document.querySelectorAll(".go-back-btn"),Array.from(e).forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),history.back()})}),l(),document.querySelectorAll(".my-imoveis-select").forEach(e=>{e.querySelectorAll("ul").forEach(e=>{e.querySelectorAll("li").forEach(e=>{e.addEventListener("click",e=>{var e=e.target.getAttribute("data-value"),t=new URL(window.location.href);e?t.searchParams.set("orderby",e):t.searchParams.delete("orderby"),window.history.pushState({},"",t),window.location=t})})})}),(e=document.getElementById("user_phone"))&&IMask(e,{mask:"000-000-000"}),(e=document.getElementById("user_whatsapp"))&&IMask(e,{mask:"000-000-000"});var e=document.getElementById("imovel_price"),t={mask:"num",blocks:{num:{mask:Number,scale:2,thousandsSeparator:".",padFractionalZeros:!0,radix:",",mapToRadix:["."]}}};e&&IMask(e,t),document.querySelectorAll(".mi-file-image-preview").forEach(e=>{let t=e.querySelector('input[type="file"]'),l=e.querySelector(".images-preview"),r=e.querySelector(".btn-clear-image"),o=e.querySelector('input[name="changed-thumbnail"]');r.addEventListener("click",e=>{for(e.preventDefault(),t.value=null;l.firstChild;)l.removeChild(l.lastChild);r.style.display="none",o.value="true"}),t.addEventListener("change",e=>{for(var t,e=e.target.files;l.firstChild;)l.removeChild(l.lastChild);for(t of e){var a=document.createElement("img");a.classList.add("image-preview"),a.src=URL.createObjectURL(t),l.append(a)}r.style.display="block",o.value="true"})}),document.querySelectorAll(".mi-repeater").forEach(e=>{let t=e.querySelector(".repeater-group");e=e.querySelector(".add-group");let a=".repeater-group-list",l=".delete-item";s(t,a),e.addEventListener("click",e=>{e.preventDefault(),n(t,a,l),s(t,a)}),t.querySelectorAll(a).forEach(e=>{i(e,l,t,a)})}),r(),document.querySelectorAll(".galeria-imovel-management").forEach(e=>{var t=e.querySelectorAll(".galeria-imovel-item");let a=e.querySelectorAll(".remove-galeria-imovel-item");t.forEach((t,e)=>{a[e].addEventListener("click",e=>{e.preventDefault(),console.log("click"),t.remove()})})}),o(),new Swiper(".home-destaque-swiper",{slidesPerView:1,spaceBetween:30,autoplay:{delay:3e3,disableOnInteraction:!1},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:3},1200:{slidesPerView:4}}}),document.querySelectorAll(".mi-contact-form").forEach(s=>{s.addEventListener("submit",n=>{if(n.preventDefault(),document.getElementById("contact-form-alert"),document.getElementById("contact-form-alert")&&bootstrap.Alert.getOrCreateInstance("#contact-form-alert").close(),s.checkValidity()){s.classList.add("was-validated");let a=s.querySelector("#nome"),l=s.querySelector("#email"),r=s.querySelector("#mensagem"),o=s.querySelector("button");if(o,o&&!o.disabled){o.disabled=!0;let e=o.innerText;o.innerText="Enviando...";var n=ajax_object.ajax_url,i=new FormData(s);i.get("action");let t=document.getElementById("contact-form-alert-placeholder");fetch(n,{method:"POST",body:i}).then(e=>e.json()).then(e=>{c(t,e.data.msg,"success"),a.value="",l.value="",r.value=""}).catch(e=>{console.error(e),c(t,e,"danger")}).finally(()=>{o.disabled=!1,o.innerText=e,s.classList.remove("was-validated")})}}})});{let e=document.querySelectorAll('input[type="radio"]');e.forEach(t=>{t.addEventListener("click",()=>{"true"===t.dataset.checked?(t.checked=!1,t.dataset.checked="false"):(e.forEach(e=>{e.name===t.name&&(e.checked=!1,e.dataset.checked="false")}),t.checked=!0,t.dataset.checked="true")})})}})})();